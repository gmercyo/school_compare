<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5" xmlns:th="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link th:href="@{/css/school.css}" rel="stylesheet">
    <title th:text="${school.name}"></title>
</head>
    <body>
        <a href="/"><button class="BackButton">Home</button></a>
        <div class="Banner">
            <span th:text="${school.name}"></span>
        </div>

        <div class="SchoolInfo">
            <h3>School Address - <span th:text="${school.address}"></span></h3>
            <h3>Ofsted Rating - <span th:text="${school.ofstedRating}"></span></h3>
            <h3>Ofsted URL - <span th:text="${school.ofstedUrl}"></span></h3>
            <h3>School Type - <span th:text="${school.type}"></span></h3>
            <h3>School Gender - <span th:text="${school.gender}"></span></h3>
            <h3>School SEN availability - <span th:text="${school.senAvailability}"></span></h3>
            <h3>School Religious Affiliation - <span th:text="${school.religiousAffiliation}"></span></h3>
            <h3>School Website - <span th:text="${school.website}"></span></h3>
        </div>

        <a th:href="@{/schools/{schoolId}/questions/new(schoolId=${school.id})}">
            <button class="BackButton">Ask Question</button>
        </a>

        <div class="Questions">
            Top Questions
            <div th:each="question : ${questions}" class="question-card">
                <h3>Question:
                    <a th:href="@{/schools/{schoolId}/questions/{questionId}(schoolId=${question.schoolId}, questionId=${question.id})}" th:text="${question.content}"></a>
                </h3>
                <form th:action="@{/likes/{questionId}(questionId=${question.id})}" method="post">
                    <button type="submit" th:text="${likedQuestionIds.contains(question.id) ? 'Unlike' : 'Like'}">
                        Like
                    </button>
                </form>
            </div>
                <div th:each="answer : ${answers}" class="answer-card">
                    <p th:text="${answer.content.substring(0, 100)}"></p>
                    <span th:text="${answer.content.length() > 100 ? '...' : ''}"></span>
                    <br>
                    <span th:text="${answer.username}"></span>
                </div>
            </div>
    </body>
</html>
